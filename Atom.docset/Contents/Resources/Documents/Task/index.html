<head>
  <meta charset="utf-8" />
  <title>Task</title>
  <link rel="stylesheet" href="../assets/styles-atom.css" />
  <link rel="stylesheet" href="../assets/styles-dash.css" />
</head>
<!DOCTYPE html>
<html lang="en">
  <!-- Mirrored from flight-manual.atom.io/api/v1.51.0/Task/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Sep 2020 04:58:35 GMT -->
  <!-- Added by HTTrack --><!-- /Added by HTTrack -->

  <body class="layout-api-class">
    <div class="footer-push">
      <div class="wrapper documents content-push wide">
        <div class="content-column">
          <div class="document-content">
            <h2 class="page-title">
              Task
              <span class="label label-extended" title="This class is in the extended API">
                Extended
              </span>

              <a
                class="document-source"
                href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L40"
                title="View class source"
              >
                <span class="octicon octicon-file-code"></span>
              </a>
            </h2>
            <div class="markdown-body">
              <p>Run a node script in a separate process.</p>

              <p>
                Used by the fuzzy-finder and
                <a href="https://github.com/atom/atom/blob/master/src/scan-handler.coffee">find in project</a>.
              </p>

              <p>
                For a real-world example, see the
                <a href="https://github.com/atom/atom/blob/master/src/scan-handler.coffee">scan-handler</a> and the
                <a
                  href="https://github.com/atom/atom/blob/4a20f13162f65afc816b512ad7201e528c3443d7/src/project.coffee#L245"
                  >instantiation of the task</a
                >.
              </p>
            </div>
            <h2 class="section">Examples</h2>
            <div class="document-examples markdown-body">
              <div class="example">
                <div class="description markdown-body">
                  <p>In your package code:</p>
                </div>

                <div class="language-coffee highlighter-rouge">
                  <div class="highlight">
                    <pre
                      class="highlight"
                    ><code><span class="p">[</span><span class="nx">Task</span><span class="p">](..</span><span class="o">/</span><span class="nx">Task</span><span class="o">/</span><span class="p">)</span> <span class="o">=</span> <span class="nx">require</span> <span class="s">&apos;atom&apos;</span>

<span class="nx">task</span> <span class="o">=</span> <span class="nx">Task</span><span class="p">.</span><span class="na">once</span> <span class="s">&apos;/path/to/task-file.coffee&apos;</span><span class="p">,</span> <span class="nx">parameter1</span><span class="p">,</span> <span class="nx">parameter2</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="na">log</span> <span class="s">&apos;task has finished&apos;</span>

<span class="nx">task</span><span class="p">.</span><span class="na">on</span> <span class="s">&apos;some-event-from-the-task&apos;</span><span class="p">,</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="na">log</span> <span class="nx">data</span><span class="p">.</span><span class="na">someString</span> <span class="c1"># prints &apos;yep this is it&apos;</span>
</code></pre>
                  </div>
                </div>
              </div>

              <div class="example">
                <div class="description markdown-body">
                  <p>In <code>&apos;/path/to/task-file.coffee&apos;</code>:</p>
                </div>

                <div class="language-coffee highlighter-rouge">
                  <div class="highlight">
                    <pre
                      class="highlight"
                    ><code><span class="nx">module</span><span class="p">.</span><span class="na">exports</span> <span class="o">=</span> <span class="p">(</span><span class="nx">parameter1</span><span class="p">,</span> <span class="nx">parameter2</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="c1"># Indicates that this task will be async.</span>
  <span class="c1"># Call the `callback` to finish the task</span>
  <span class="nx">callback</span> <span class="o">=</span> <span class="vi">@</span><span class="na">async</span><span class="p">()</span>

  <span class="nx">emit</span><span class="p">(</span><span class="s">&apos;some-event-from-the-task&apos;</span><span class="p">,</span> <span class="p">{</span><span class="na">someString</span><span class="o">:</span> <span class="s">&apos;yep this is it&apos;</span><span class="p">})</span>

  <span class="nx">callback</span><span class="p">()</span>
</code></pre>
                  </div>
                </div>
              </div>
            </div>
            <h2 class="detail-section">Methods</h2>
            <div class="api-entry js-api-entry essential" id="class-once">
              <h3 class="name">
                <a name="//apple_ref/cpp/Method/once" class="dashAnchor"></a
                ><a href="#class-once" class="js-api-name method-signature" name="class-once">
                  .once<span class="argument-list"
                    >(<span class="argument">taskPath</span>, <span class="argument">args</span>)</span
                  >
                </a>
                <a class="document-source" href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L48">
                  <span class="octicon octicon-file-code"></span>
                </a>
              </h3>
              <div class="method-summary-wrapper">
                <div class="summary markdown-body">
                  <p>A helper method to easily launch and run a task once.</p>
                </div>

                <div class="body markdown-body">
                  <div class="description"></div>
                </div>

                <table class="arguments">
                  <thead>
                    <tr>
                      <th>Argument</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>taskPath</code></p>
                      </td>
                      <td>
                        <p>
                          The
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"
                            >String</a
                          >
                          path to the CoffeeScript/JavaScript file which exports a single
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"
                            >Function</a
                          >
                          to execute.
                        </p>
                      </td>
                    </tr>

                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>args</code></p>
                      </td>
                      <td>
                        <p>The arguments to pass to the exported function.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <table class="return-values">
                  <thead>
                    <tr>
                      <th>Return values</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="markdown-body">
                        <p>Returns the created <a href="index.html">Task</a>.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="api-entry js-api-entry essential" id="instance-constructor">
              <h3 class="name">
                <a name="//apple_ref/cpp/Constructor/Task" class="dashAnchor"></a
                ><a href="#instance-constructor" class="js-api-name method-signature" name="instance-constructor">
                  ::constructor<span class="argument-list">(<span class="argument">taskPath</span>)</span>
                </a>
                <a class="document-source" href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L66">
                  <span class="octicon octicon-file-code"></span>
                </a>
              </h3>
              <div class="method-summary-wrapper">
                <div class="summary markdown-body">
                  <p>Creates a task. You should probably use {.once}</p>
                </div>

                <div class="body markdown-body">
                  <div class="description"></div>
                </div>

                <table class="arguments">
                  <thead>
                    <tr>
                      <th>Argument</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>taskPath</code></p>
                      </td>
                      <td>
                        <p>
                          The
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"
                            >String</a
                          >
                          path to the CoffeeScript/JavaScript file that exports a single
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"
                            >Function</a
                          >
                          to execute.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="api-entry js-api-entry essential" id="instance-start">
              <h3 class="name">
                <a name="//apple_ref/cpp/Method/start" class="dashAnchor"></a
                ><a href="#instance-start" class="js-api-name method-signature" name="instance-start">
                  ::start<span class="argument-list"
                    >(<span class="argument">args</span>, <span class="argument">callback</span>)</span
                  >
                </a>
                <a class="document-source" href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L113">
                  <span class="octicon octicon-file-code"></span>
                </a>
              </h3>
              <div class="method-summary-wrapper">
                <div class="summary markdown-body">
                  <p>Starts the task.</p>
                </div>

                <div class="body markdown-body">
                  <div class="description">
                    <p>
                      Throws an error if this task has already been terminated or if sending a message to the child
                      process fails.
                    </p>
                  </div>
                </div>

                <table class="arguments">
                  <thead>
                    <tr>
                      <th>Argument</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>args</code></p>
                      </td>
                      <td>
                        <p>The arguments to pass to the function exported by this task&#x2019;s script.</p>
                      </td>
                    </tr>

                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>callback</code></p>
                      </td>
                      <td>
                        <span class="optional">optional</span>
                        <p>
                          A
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"
                            >Function</a
                          >
                          to call when the task completes.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="api-entry js-api-entry essential" id="instance-send">
              <h3 class="name">
                <a name="//apple_ref/cpp/Method/send" class="dashAnchor"></a
                ><a href="#instance-send" class="js-api-name method-signature" name="instance-send">
                  ::send<span class="argument-list">(<span class="argument">message</span>)</span>
                </a>
                <a class="document-source" href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L130">
                  <span class="octicon octicon-file-code"></span>
                </a>
              </h3>
              <div class="method-summary-wrapper">
                <div class="summary markdown-body">
                  <p>Send message to the task.</p>
                </div>

                <div class="body markdown-body">
                  <div class="description">
                    <p>
                      Throws an error if this task has already been terminated or if sending a message to the child
                      process fails.
                    </p>
                  </div>
                </div>

                <table class="arguments">
                  <thead>
                    <tr>
                      <th>Argument</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>message</code></p>
                      </td>
                      <td>
                        <p>The message to send to the task.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="api-entry js-api-entry essential" id="instance-on">
              <h3 class="name">
                <a name="//apple_ref/cpp/Method/on" class="dashAnchor"></a
                ><a href="#instance-on" class="js-api-name method-signature" name="instance-on">
                  ::on<span class="argument-list"
                    >(<span class="argument">eventName</span>, <span class="argument">callback</span>)</span
                  >
                </a>
                <a class="document-source" href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L143">
                  <span class="octicon octicon-file-code"></span>
                </a>
              </h3>
              <div class="method-summary-wrapper">
                <div class="summary markdown-body">
                  <p>Call a function when an event is emitted by the child process</p>
                </div>

                <div class="body markdown-body">
                  <div class="description"></div>
                </div>

                <table class="arguments">
                  <thead>
                    <tr>
                      <th>Argument</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>eventName</code></p>
                      </td>
                      <td>
                        <p>
                          The
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"
                            >String</a
                          >
                          name of the event to handle.
                        </p>
                      </td>
                    </tr>

                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>callback</code></p>
                      </td>
                      <td>
                        <p>
                          The
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"
                            >Function</a
                          >
                          to call when the event is emitted.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <table class="return-values">
                  <thead>
                    <tr>
                      <th>Return values</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="markdown-body">
                        <p>
                          Returns a <a href="../Disposable/index.html">Disposable</a> that can be used to stop listening
                          for the event.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="api-entry js-api-entry essential" id="instance-once">
              <h3 class="name">
                <a name="//apple_ref/cpp/Method/once" class="dashAnchor"></a
                ><a href="#instance-once" class="js-api-name method-signature" name="instance-once">
                  ::once<span class="argument-list"
                    >(<span class="argument">taskPath</span>, <span class="argument">args</span>)</span
                  >
                </a>
                <a class="document-source" href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L145">
                  <span class="octicon octicon-file-code"></span>
                </a>
              </h3>
              <div class="method-summary-wrapper">
                <div class="summary markdown-body">
                  <p>A helper method to easily launch and run a task once.</p>
                </div>

                <div class="body markdown-body">
                  <div class="description"></div>
                </div>

                <table class="arguments">
                  <thead>
                    <tr>
                      <th>Argument</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>taskPath</code></p>
                      </td>
                      <td>
                        <p>
                          The
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"
                            >String</a
                          >
                          path to the CoffeeScript/JavaScript file which exports a single
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"
                            >Function</a
                          >
                          to execute.
                        </p>
                      </td>
                    </tr>

                    <tr class="markdown-body argument-depth-0">
                      <td>
                        <p><code>args</code></p>
                      </td>
                      <td>
                        <p>The arguments to pass to the exported function.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <table class="return-values">
                  <thead>
                    <tr>
                      <th>Return values</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="markdown-body">
                        <p>Returns the created <a href="index.html">Task</a>.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="api-entry js-api-entry essential" id="instance-terminate">
              <h3 class="name">
                <a name="//apple_ref/cpp/Method/terminate" class="dashAnchor"></a
                ><a href="#instance-terminate" class="js-api-name method-signature" name="instance-terminate">
                  ::terminate<span class="argument-list">()</span>
                </a>
                <a class="document-source" href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L153">
                  <span class="octicon octicon-file-code"></span>
                </a>
              </h3>
              <div class="method-summary-wrapper">
                <div class="summary markdown-body">
                  <p>Forcefully stop the running task.</p>
                </div>

                <div class="body markdown-body">
                  <div class="description">
                    <p>No more events are emitted once this method is called.</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="api-entry js-api-entry essential" id="instance-cancel">
              <h3 class="name">
                <a name="//apple_ref/cpp/Method/cancel" class="dashAnchor"></a
                ><a href="#instance-cancel" class="js-api-name method-signature" name="instance-cancel">
                  ::cancel<span class="argument-list">()</span>
                </a>
                <a class="document-source" href="https://github.com/atom/atom/blob/v1.51.0/src/task.coffee#L169">
                  <span class="octicon octicon-file-code"></span>
                </a>
              </h3>
              <div class="method-summary-wrapper">
                <div class="summary markdown-body">
                  <p>Cancel the running task and emit an event if it was canceled.</p>
                </div>

                <div class="body markdown-body">
                  <div class="description"></div>
                </div>

                <table class="return-values">
                  <thead>
                    <tr>
                      <th>Return values</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="markdown-body">
                        <p>
                          Returns a
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean"
                            >Boolean</a
                          >
                          indicating whether the task was terminated.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>

  <!-- Mirrored from flight-manual.atom.io/api/v1.51.0/Task/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Sep 2020 04:58:35 GMT -->
</html>
